<!doctype html>
<html class="no-js" lang="es"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <META NAME="Title" CONTENT="AFSimplex Resolver problemas de Programacion Lineal Online">
    <META NAME="Keywords" CONTENT="Software, Programa, Online, Programacion, Lineal, No, Nolineal, Investigacion, Administracion, Operaciones, Programacion, lineal, matematicas">   
    <Title>AFSimplex</Title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous""></script>
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    <script src="https://apis.google.com/js/platform.js" async defer>
        {lang: 'es-419'}
    </script>
</head>
<body>
<div id="fb-root"></div>


<div class="fondo">       
        <div class="col-md-9">
        <div class="cover" style="margin-left:30%;margin-right:auto;">
                <div class="row">
                  <div class="col-md-12 articulo">
                       
                       <div class="col-md-12">
	<div class="row">
        <h1>AFSimplex:</h1> <br>
        <h3 style="text-align:center;"> RESOLUCION DE PROBLEMAS DE OPTIMIZACIÓN LINEAL CON EL USO DEL MÉTODO SIMPLEX</h3>
	</div>
	<div class="row">
		<form action="" method="post" class="elegant-aero" style="">
		    <label id="h1form">Problema Lineal </label><br>
		    <p><b>Objetivo</b>:&nbsp;&nbsp;&nbsp; Maximizar&nbsp;
			<input id="idoptmaximizar" type="radio" value="V1" checked name="objetivo">&nbsp;&nbsp;&nbsp;&nbsp; 
			Minimizar:&nbsp;&nbsp;&nbsp; <input i="idoptminimizar" type="radio" name="objetivo" value="V2"></p>
		    
		    <label>
		        N&uacute;mero de variables:
		            <input id="idnovariables" type="text" name="txtnovariables" size="2">        
		    </label>
		     
		    <label>
		        N&uacute;mero de Restricciones:
		            <input id="idnorestricciones" type="text" name="txtnorestricciones" size="2">        
		    </label>
		        <br>     
		        <div align="center"><button type="button" class="button" value="Preparar" onclick="preparar()" /><i class="fa fa-cog"></i>   Preparar</button> </div> 
		    </label>    
		</form>
		<br>
		<br>
		<div id="idgridproblema">    
		</div>
		<div id="jmodelo">    
		</div>
		<div id="jsolucion">    
		</div>
	
<script type="text/javascript">

   function jsimplex(div)
 {
     this.novariables=0;
     this.norestricciones=0;
     this.noxs=0;
     this.noss=0;
     this.noas=0;
     this.ntotal=0;   
     this.problema = new Array();
     this.a = new Array(); //matriz de las restricciones
     this.c= new Array(); //funciÃ³n objetivo
     this.base= new Array();
     this.theta=new Array();
     this.zeta =new Array();
     this.documentar = true;
     this.maximizar = true;
     this.varsaliente=0;
     this.varentrante =0;
     this.tiposolucion = 1;
     //
         
     jsimplex.prototype.normalizar=function()
     {
         var i=0;
         var j=0;
         var is=0;
         var ia=0;
         var s="";
         
        try
        {
            this.noxs= this.novariables;
            for (i=1; i<= this.norestricciones; i++)
            {
               switch (this.problema[i][this.noxs+1])
               {
                   case "<=":
                       this.noss=this.noss+1;                  
                       break;
                   case ">=":
                       this.noss++;
                       this.noas++;
                       break;
                   case "=":
                       this.noas++;
                       break;
               }
            }
            // hay noxs + noss + noas
            this.ntotal = this.noxs+ this.noss + this.noas;
            this.a = new Array(this.norestricciones+1);
            this.base= new Array(this.norestricciones);
            this.zeta= new Array(4);
            for (i=0; i<=4; i++)
            {
                this.zeta[i]=new Array(this.ntotal+1);
            }
            
            for (i=0; i<= this.norestricciones+1; i++)
            {
                this.a[i]= new Array(this.ntotal+1);
            }
            this.c = new Array(2);
            for (i=0; i<=3; i++)
            {
                this.c[i]= new Array(this.ntotal);
            }
            //inicialicemos por si las moscas...
            for (i=0; i<=this.ntotal; i++)
            {
                this.c[0][i]=""; //Nombre de la variable...
                this.c[1][i]=0; //valor de la variable en numeros
                this.c[2][i]=0; //Valor del coeficiente de la M, si lo hay...
                this.c[3][i]=0; //El tipo de variable...
            }
            

            for (i=1; i <= this.norestricciones; i++)
            {
                for (j=1;j<=this.noxs;j++)
                {
                    this.a[i][j]= this.problema[i][j];
                }
                switch (this.problema[i][this.noxs+1])
                {
                    case "<=":
                        is++;                     
                        for (j=1; j<=this.noss; j++)
                        {
                            if (is==j)
                            {
                                this.a[i][this.noxs+j]=1;
                                this.base[i]=this.noxs+j;
                            }else
                            {
                                this.a[i][this.noxs+j]=0;
                            } 
                        }
                        if (this.noas >=1)
                        {
                                for (j=1; j<=this.noas; j++)
                               {
                                   this.a[i][this.noxs+ this.noss + j]=0;
                               }   
                        }
                        
                        break;
                    case ">=":
                        is++;
                        ia++;
                        for (j=1; j<=this.noss; j++)
                        {
                            if (is==j)
                            {
                                this.a[i][this.noxs+j]=-1;                             
                            }else
                            {
                                this.a[i][this.noxs+j]=0;
                            } 
                        }
                        for (j=1; j<=this.noas; j++)
                        {
                            if (ia==j)
                            {
                                this.a[i][this.noxs+this.noss+j]=1;
                                this.base[i]=this.noxs+this.noss+j;
                            }else
                            {
                                this.a[i][this.noxs+this.noss+j]=0;
                            } 
                        }                     
                        break;
                    case "=":
                        ia++;
                        for (j=1; j<=this.noss; j++)
                        {
                            this.a[i][this.noxs+j]=0;                          
                        }
                        for (j=1; j<=this.noas; j++)
                        {
                            if (ia==j)
                            {
                                this.a[i][this.noxs+this.noss+j]=1;
                                this.base[i]= this.noxs+this.noss+j;
                            }else
                            {
                                this.a[i][this.noxs+this.noss+j]=0;
                            } 
                        }
                }
                this.a[i][this.noxs+ this.noss+ this.noas+1]= this.problema[i][this.novariables+2];             
            }
            //llenar la funciÃ³n objetivo...
             for (i=1; i<=this.noxs; i++)
            {
                this.c[0][i] = this.a[0][i];
            }
            
            s="<Table border='1'>";
            for (i=1; i <= this.norestricciones; i++)
            {
                s=s + "<tr>";   
                for (j=1; j<=this.noxs; j++)
                {
                    if (this.a[i][j]!= 0)
                    {
                        s=s + "<td>+"+this.a[i][j]+"X<sub>"+j+"</sub><td>";
                    }else
                    {
                        s=s + "<td><td>";
                    }   
                }
                for (j=1; j<=this.noss; j++)
                {
                    if (this.a[i][this.noxs + j]!= 0)
                    {
                        s=s + "<td>+"+this.a[i][this.noxs + j]+"S<sub>"+j+"</sub><td>";
                    }else
                    {
                        s=s + "<td><td>";
                    }    
                }
                for (j=1; j<=this.noas; j++)
                {
                    if (this.a[i][this.noxs + this.noss + j]!= 0)
                    {
                        s=s + "<td>+"+this.a[i][this.noxs + this.noss +   j]+"A<sub>"+j+"</sub><td>";
                    }else
                    {
                        s=s + "<td><td>";
                    }    
                }
               s=s + "<td>=<td>";
               s=s + "<td>"+this.a[i][this.ntotal+1]+"<td>";
               s=s + "</tr>";
            }
            s=s + "</table>";
            s= s +"<br>";
            s= s+ "<br>";
            s= s+ "<table border='1'>";            
            for (i=1; i<= this.norestricciones;  i++)
            {
                s= s+ "<tr>";
                for (j=1; j<=this.ntotal+1; j++ )
                {
                    s= s+ "<td>"+this.a[i][j]+"</td>";
                }
                s= s+ "</tr>";
            }
            s= s+ "</table>";
            
             //Llenar los coeficientes de la funcion objetivo...
             for (i=1; i<= this.ntotal; i++)
             {
                 //llenar los nombres...
                 if (i<= this.noxs)
                 {
                     this.c[0][i]="<font color='#0000FF'>X</font><sub>"+i+"</sub>";
                     this.c[3][i]=1; //Variables de decision 1
                 }
                 if (i>=this.noxs+1 && i<= this.noxs+ this.noss  )
                 {
                     this.c[0][i]="<font color='#0000FF'>S</font><sub>"+(i-this.noxs)+"</sub>";
                     this.c[3][i]= 2; //Variables de holhura y superavit
                 }
                 if (i>=(this.noxs+this.noss +  1) )
                 {
                     this.c[0][i]="<font color='#0000FF'>A</font><sub>"+(i-this.noxs-this.noss)+"</sub>";
                     this.c[3][i]=3;// Variables artificiales...
                     if (this.maximizar)
                     {
                        this.c[2][i]=-1;
                     }else
                     {
                         this.c[2][i]=1;
                     }
                 }
                 //Llenar los coeficientes nÃºmericos...
                 if (i<= this.noxs)
                 {
                     this.c[1][i]=this.problema[0][i];
                 }
                 if (i>=this.noxs+1 && i<= this.noxs+ this.noss + this.noas  )
                 {
                     this.c[1][i]=0;
                 }
                 
             }
            
            
            //documentar...
            var smodelo="";
            if (this.documentar)
            {
                smodelo = "<br><table>";
                smodelo = smodelo +"<tr>";
                //documentar la funciÃ³n objetivo....
                smodelo = smodelo +"<td><b>"+(this.maximizar?"Max Z = ":"Min Z = ")+"</b></td>";
                for (i=1; i<=this.noxs+this.noss; i++)
                {
                    if (i==1)
                    {
                        smodelo = smodelo +"<td>"+     this.c[1][i] + this.c[0][i]+"</td>";
                    }else
                    {
                        smodelo = smodelo +"<td>"+(this.c[1][i]>=0?"+":"" )+ this.c[1][i] + this.c[0][i]+"</td>";
                    }    
                    
                }
                for (i=(this.noxs+this.noss+1); i<=this.ntotal; i++)
                {                    
                    smodelo = smodelo +"<td>"+(this.c[2][i]>=0?"+":"" ) +this.c[2][i]+"M"+this.c[0][i]+"</td>";
                }
                smodelo = smodelo +"</tr>";
                smodelo = smodelo +"<tr><td>Sujeto a:</td></tr>";
                for (i=1; i<= this.norestricciones; i++)
                {
                    smodelo = smodelo +"<tr>";
                    smodelo = smodelo +"<td></td>";
                    for (j=1; j<=this.ntotal; j++)
                    {
                        if (this.a[i][j]!= 0)
                        {
                            if (j>1)
                            {
                                smodelo = smodelo +"<td>"+(this.a[i][j]>0?"+":"")+  this.a[i][j]+this.c[0][j]+"</td>";    
                            }else
                            {
                                smodelo = smodelo +"<td>"+ this.a[i][j]+this.c[0][j]+"</td>";
                            }    
                            
                        }else
                        {
                            smodelo = smodelo +"<td></td>";
                        }    
                        
                    }
                    smodelo = smodelo +"<td> = </td>";
                    smodelo = smodelo +"<td>"+ this.a[i][this.ntotal+1]   +"</td>";
                    smodelo = smodelo +"</tr>";
                }
                smodelo = smodelo +"<tr><td>Xi>=0</td></tr>";
                smodelo = smodelo +"</table><br>";
                smodelo = smodelo +"Xi = Variables de decisi&oacute;n<br> Si = Variables de holgura o super&aacute;vit <br>Ai = Variables artificiales ";
                document.getElementById(div).innerHTML = document.getElementById(div).innerHTML  + smodelo;
            }
        }catch(err)
        {
            alert("Error :"+err.message);
        }
         return s;
     }
     jsimplex.prototype.calcularzeta=function()
     {
         try
         {
         //Fila 1: Zeta Numeros
         //Fila 2: Zeta M
         //Fila 3: C - Z Numeros
         //Fila 4: C - Z M
         var suma=0;
         var sumam=0;
         var coef=0;
         var coefm=0;
         for (j=1; j<= this.ntotal+1; j++)
         {
             suma=0;
             sumam=0;
             for (i=1; i<=this.norestricciones; i++)
             {
                 coef= this.c[1][this.base[i]];
                 coefm= this.c[2][this.base[i]];
                 suma = suma + coef*this.a[i][j];
                 sumam=sumam+ coefm*this.a[i][j];
             }
             this.zeta[1][j]= suma;
             this.zeta[2][j]= sumam;
             this.zeta[3][j]=this.c[1][j]-this.zeta[1][j];
             this.zeta[4][j]=this.c[2][j]-this.zeta[2][j];
             
         }
         return 0;
        }catch(err)
        {
            alert("Calcular zeta "+err.message);
        }
     }
     jsimplex.prototype.documentarmatrix=function()
     {
         try
         {
         if (this.documentar)
         {
             var s="";
             var temp=0;
             
             s= s + "<br><br>";
             s= s + "<div class='Table1'><table >";
                s= s + "<tr>";
                s= s + "<td></td>";
                if (this.maximizar)
                {
                    s= s + "<td>Max Z =</td>";
                }else
                {
                    s= s + "<td>Min Z =</td>";
                }
                for (j=1; j<=this.ntotal; j++)
                {
                    s= s + "<td>"+(this.c[2][j]!=0?this.c[2][j]+"M":this.c[1][j])+"</td>";
                }
                s= s + "<td></td>";
                s= s + "<td></td>";
                s= s + "</tr>";
                s= s + "<tr>";
                s= s + "<td>Coef</td>";
                s= s + "<td>Base</td>";
                for (j=1; j<=this.ntotal; j++)
                {
                    s= s + "<td>"+this.c[0][j]+"</td>";
                }
                s= s + "<td>R.H.S</td>";
                s= s + "<td>Theta</td>";
                s= s + "</tr>";
                for (i=1; i<=this.norestricciones; i++)
                {
                    s= s + "<tr>";
                    s= s + "<td>"+(this.c[2][this.base[i]]!=0?this.c[2][this.base[i]]+"M":this.c[1][this.base[i]])+"</td>";
                    s=s + "<td>"+this.c[0][this.base[i]]+"</td>";
                    for (j=1; j<=this.ntotal+1; j++)
                    {
                        temp=this.a[i][j];
                        temp = redondear(temp,2);
                        temp= temp.toString()+" ";
                        s= s+"<td>"+temp  +"</td>";
                    }
                    temp = this.theta[i];
                    temp= redondear(temp,2);
                    temp= temp + " ";
                    s= s+ "<td>"+(this.theta[i]==0?"-":(isNaN(this.theta[i])?"":temp))+"</td>";
                    s= s + "</tr>";
                }
             s= s + "<tr>";
             s= s+ "<td></td>";
             
             s= s+ "<td>Z</td>";
             for (j=1;j<=this.ntotal+1;j++)
             {
                 s= s+ "<td>"+m(this.zeta[2][j],this.zeta[1][j])   +"</td>";
             }
             s= s+"<td></td>";
             s= s + "</tr>";
             s= s + "<tr>";
             s= s+ "<td></td>";
             s= s+ "<td>C<sub>i</sub>-Z<sub>i</sub></td>";
             for (j=1;j<=this.ntotal;j++)
             {
                 s= s+ "<td>"+m(this.zeta[4][j],this.zeta[3][j])+"</td>";
             }
             s= s+ "<td></td>";             
             s= s+"<td></td>";
             s= s + "</tr>";
             s= s + "</table></div>";
             document.getElementById(div).innerHTML += s; 
         }
         return 0;
     }catch(err)
        {
            alert(err.message);
        }
     }
     function m(valorm,valor)
     {
         var s="";
         var temp=0;
         if (valorm==0)
         {
             temp=valor;
             temp = redondear(temp,2);
             temp = temp.toString()+" ";
             return temp;
         }else
         {
             if (valorm==1)
             {
                s="M"; 
             }else
             {
                 temp=valorm;
                 temp = redondear(temp,2);
                 temp = " "+temp ;
                 s= temp+"M";
             }    
         }
         if (valor!= 0)
         {
            if (valor<0)
            {
                temp = valor;
                temp = redondear(temp,2);
                temp = temp + " ";
                s=s +temp;
            }else
            {
                temp= valor;
                temp = redondear(temp, 2);
                temp = temp + " ";
                s= s +" + "+temp;
            }
         }
     return s;    
     }
     jsimplex.prototype.quienentra=function()
     {
         try
         {
         var i = 0; 
         var j = 0;
         var mejor=0;
         var mejorvalor =0;
         var mejordesempate=0;
         
         if (this.maximizar)
         {
             //Para maximizar buscamos el mas grande...
             for (j=1; j<=this.ntotal; j++)
             {
                 //Primero buscar dentro de los que tengan coeficientes con m si no encuentra entonces con numeros...
                 if (this.zeta[4][j]>mejorvalor)
                 {
                     mejor =j;
                     mejorvalor = this.zeta[4][j];
                 }
             }
             //Si encontrÃ³ un valor, se puede retornar...
             if ( mejor> 0)
             { 
               //hay que tener en cuenta los empates en m, par desemparar...
                for (j=1; j<= this.ntotal; j++)
                {
                    if (this.zeta[4][j]== mejorvalor )
                    {
                        if (this.zeta[3][j] > mejordesempate   )
                        {
                            mejordesempate = this.zeta[3][j];
                            mejor = j;
                        }
                    }                    
                }    
                     
                 if (this.documentar)
                 {
                     document.getElementById(div).innerHTML+="<br><br>Variable que entra: "+this.c[0][mejor] ;
                 }
                 return mejor;
             }else
             {
                 //buscar dentro de los valores sin m...
                 for (j=1; j<=this.ntotal; j++)
                 {
                     if (this.zeta[4][j]==0) //por si las moscas habÃ­a una z negativa...
                     {    
                        if (this.zeta[3][j]>mejorvalor)
                        {
                            mejorvalor= this.zeta[3][j];
                            mejor=j;
                        }
                    }
                 }
                  if (this.documentar)
                 {
                     document.getElementById(div).innerHTML+="<br><br>Variable que entra: "+this.c[0][mejor] ;
                 }
                 return mejor; //Si no encontrÃ³ nada, retornarÃ¡ cero... y en ese caso se ha terminado...
             }    
         }else
         {
             //Para minimizar buscamos el mas pequeÃ±o...
             //Para maximizar buscamos el mas grande...
             mejordesempate = 9999999999;
             for (j=1; j<=this.ntotal; j++)
             {
                 //Primero buscar dentro de los que tengan coeficientes con m si no encuentra entonces con numeros...
                 if (this.zeta[4][j] < mejorvalor)
                 {
                     mejor =j;
                     mejorvalor = this.zeta[4][j];
                 }
             }
             //Si encontrÃ³ un valor, se puede retornar...
             if ( mejor > 0)
             {
                 //evaluar el desempate de m con los n
                 for (j=1; j<=this.ntotal; j++)
                 {
                     if (this.zeta[4][j] == mejorvalor)
                     {
                         if (this.zeta[3][j] < mejordesempate)
                         {
                             mejordesempate = this.zeta[3][j];
                             mejor = j;
                         }
                     }
                 }                 
                     
                 if (this.documentar)
                 {
                     document.getElementById(div).innerHTML+="<br><br>Variable que entra: "+this.c[0][mejor] ;
                 }
                 return mejor;
             }else
             {
                 //buscar dentro de los valores sin m...
                 for (j=1; j<=this.ntotal; j++)
                 {
                     if (this.zeta[4][j]==0)
                     {    
                        if (this.zeta[3][j] < mejorvalor)
                        {
                            mejorvalor= this.zeta[3][j];
                            mejor=j;
                        }
                    }
                 }
                 if (this.documentar)
                 {
                     if (mejor!=0)
                     {
                         document.getElementById(div).innerHTML+="<br><br>Variable que entra: "+this.c[0][mejor] ;
                     }else
                     {
                         document.getElementById(div).innerHTML+="<br><br>Se encontrÃ³ la soluciÃ³n: ";
                     }
                 }               
                 
                 return mejor; //Si no encontrÃ³ nada, retornarÃ¡ cero... y en ese caso se ha terminado...
             }    
         } 
     }catch(err)
        {
            alert(err.message);
        }         
     }
     jsimplex.prototype.quiensale = function(varentrante)
     {
     try
        {
            var i=0;
            var numerador=0;
            var denominador=0;
            var varsaliente=0;
            var menor=0;
            var mayor=999999999999;

            for (i=1; i<=this.norestricciones;i++)
            {
               denominador = this.a[i][varentrante];
               numerador = this.a[i][this.ntotal+1];
               if (denominador==0)
               {
                   this.theta[i] =  0;
               }else
               {
                   if (numerador/denominador <0)
                   {
                       this.theta[i] = 0;
                   }else
                   {
                       this.theta[i]=numerador/denominador;
                   }    
               }    
            }

            for (i=1; i<=this.norestricciones; i++)
            {
                if (this.theta[i]>mayor)
                {
                    mayor=this.theta[i];
                }
            }
            //SÃ³lo estaba buscando un valor grande, para luego buscar el menor... no es la mejor forma, pero es 
            //la mas rapida que se me ocurrio...
            menor = mayor; //Bastante loca esta lÃ­nea...
            for (i=1; i<= this.norestricciones; i++)
            {
                if (this.theta[i]!= 0)
                {
                    if (this.theta[i] <= menor )
                    {
                        menor = this.theta[i];
                        varsaliente= i;
                    }
                }
            }
            if (this.documentar)
                    {
                        if (varsaliente!=0)
                        {
                            document.getElementById(div).innerHTML+="<br>Variable que sale: "+this.c[0][this.base[varsaliente]] ;
                        }else
                        {
                            document.getElementById(div).innerHTML+="<br>Vale mía No hay solución";
                            this.tiposolucion = 3;
                            return 0;
                        }
                    }
           return varsaliente;
         }catch(err)
           {
               alert(err.message);
           }
      }
     jsimplex.prototype.gauss=function(ifila,icolumna)
     {
       var i = 0;
       var j = 0;
       var k = 0;
       var filapivote= new Array(this.ntotal+1);
       var filatemp = new Array(this.ntotal+1);
       var s="";
       var pivote=0;
       var temp=0;
       var num=0;
       
       try 
       {
       if (ifila > this.norestricciones ) {return false;}
       if (icolumna > this.ntotal+1 )  {return false;}
       
       s= s+ "<br><div class='gauss'>";
       s= s +"<table border='0' cellspacing='20'>";
       s= s+ "<tr>";
       s= s+ "<td><b>Gauss-Jordan</b>:Fila Pivote</td>";
       
       for (j=1; j<=this.ntotal+1; j++)
       {
           num = this.a[ifila][j];
           s= s+ "<td>"+ num.toPrecision(2)  +"</td>";
       }
       s= s+ "</tr>";
       
       s= s+ "<tr>";
       s= s+ "<td>Fila Pivote convertida</td>";
       
       pivote = this.a[ifila][icolumna];
       
       if (pivote==0)
       {
           s= s +  "mi llave hay un error: pivote igual a cero";
           return 0;
       }
       
       for (j=1; j<=this.ntotal+1; j++)
       {
           this.a[ifila][j] = this.a[ifila][j]/pivote;
           num = this.a[ifila][j];
           s= s+ "<td>"+ num.toPrecision(2)  +"</td>";
       }
       s= s+ "</tr>";
       
       s= s + "<tr>";
       for (j=1; j<=this.ntotal+2;j++)
       {
           s= s +"<td></td>";
       }
       s= s +"</tr>";
       
       for (i=1; i<=this.norestricciones; i++)
       {
           if (i != ifila)
           {
               //
               s = s  + "<tr>";
               s = s  + "<td>Restricci&oacute;n "+i+"</td>";
               for (j=1; j<= this.ntotal+1; j++)
               {
                   num = this.a[i][j];
                    s= s+ "<td>"+ num.toPrecision(2)  +"</td>";
               }
               s = s  + "</tr>";
               
               s = s + "<tr>";
               
               temp =  this.a[i][icolumna]*-1;
               
               s = s  + "<td>Fila pivote * "+temp.toPrecision(2)+"</td>";               
               for (j=1; j<=this.ntotal+1; j++)
               {
                   num = this.a[ifila][j]*temp;
                   s = s + "<td>"+num.toPrecision(2)+"</td>";
               }
               s = s + "</tr>";
               
               s= s + "<tr>";
               s= s +"<td>Nueva restricciÃ³n "+i+"</td>";
               for (j=1; j<=this.ntotal+1;j++)
               {
                   this.a[i][j]= this.a[i][j] +  this.a[ifila][j]*temp;
                   num = this.a[i][j];
                   s= s+ "<td>"+ num.toPrecision(2) +"</td>";
               }
               s= s +"</tr>";               
               
                s= s + "<tr>";
               for (j=1; j<=this.ntotal+2;j++)
               {
                   s= s +"<td></td>";
               }
               s= s +"</tr>";
               
               
           }
       }
       
       s= s + "</table>";
       s= s + "</div>";
       
           
       if (this.documentar)
       {
           document.getElementById(div).innerHTML += s;
       }
       this.base[ifila]= icolumna;
       return 0;
           }catch(err)
         {
             //alert(err.message);
         } 
     }
     
    jsimplex.prototype.solucionencontrada=function()
    {
        //Evaluar si se hallÃ³ una soluciÃ³n...
        //Depende del objetivo del problema...
        //Respuestas posibles:
        //1.SoluciÃ³n no encontrada. Se puede mejorr.
        //2.SoluciÃ³n Ã³ptima encontrada
        //3. No hay soluciÃ³n
        //4. Soluciones infinitas
        
        try
        {
        
        var i=0;
        var j=0;
        var m=0;
        var n=0;
        var s="";
        
        if (this.maximizar)
        {
            for (j=1; j<=this.ntotal;j++)
            {
                if (this.zeta[4][j] > 0 )
                {
                    //encontrÃ³ una m positiva...
                    
                    return 1;
                }
                if (this.zeta[3][j] > 0)
                {
                    //Hay un valor positivo en numeros...
                    if (this.zeta[4][j] < 0)
                    {
                        //una m negativa neutraliza la n positiva...
                        //no hacer nada...
                    }
                    if (this.zeta[4][j] == 0)
                    {
                        
                        return 1;
                    }
                }
            }
            //nadie entra a mejorar la soluciÃ³n... pero si hay una variable
            //artificial en la base con un valor positivo en la soluciÃ³n, significa que
            //no hay solucion posible...
            // 
            for (j=1; j<= this.noas; j++)
            {
                //sÃ³lo entra, si hay variables artificiales en el problema...
               if (this.valorvariable(this.noxs+this.noss+j) != 0 )
               {
                   //changos!! El problema no tiene soluciÃ³n!!!
                   this.tiposolucion = 3;
                   return 3;
               }
            }
            return 2;

                           
        }else
        {
           for (j=1; j<=this.ntotal;j++)
            {
                if (this.zeta[4][j] < 0 )
                {
                    //encontrÃ³ una m positiva...
                    
                    return 1;
                }
                if (this.zeta[3][j] < 0)
                {
                    //Hay un valor positivo en numeros...
                    if (this.zeta[4][j] > 0)
                    {
                        //una m negativa neutraliza la n positiva...
                        //no hacer nada...
                    }
                    if (this.zeta[4][j] == 0)
                    {
                        
                        return 1;
                    }
                }
            }
             for (j=1; j<= this.noas; j++)
            {
                //sÃ³lo entra, si hay variables artificiales en el problema...
               if (this.valorvariable(this.noxs+this.noss+j) != 0 )
               {
                   //changos!! El problema no tiene soluciÃ³n!!!
                   this.tiposolucion = 3;
                   return 3;
               }
            }
            
            return 2;
    
        } 
        }catch(err)
        {
           // alert("Solucion encontrada "+err.message);
        }
        
    } 
    
     jsimplex.prototype.solucionar=function()
     {  
        var i=0;
        var j=0;
        var k=0;
        var num=0;
        var s="<br><br><h2>Soluci&oacute;n</h2><br>";
        var ntablas=0;
        this.normalizar();
        this.calcularzeta();
        while( this.solucionencontrada() == 1 )
            {                
                i= this.quienentra();
                j= this.quiensale(i);
                if (j==0)
                {
                    //no sale nadie! Oops. No hay soluciÃ³n.
                    this.tiposolucion = 3;
                    break;
                }    

                this.documentarmatrix();
                this.gauss(j,i);
                ntablas++;
                if (ntablas==100)
                {
                    break;
                }
                this.calcularzeta();
            }  
            this.documentarmatrix();
         //Aqui ya se encuentra una soluciÃ³n...
         for (j=1; j<=this.ntotal; j++)
            {
              num = this.valorvariable(j);  
              num = redondear(num,2),
              s= s + this.c[0][j] + " = " + num +"<br>" ;    
            }
            s =  s +"<b><font color='#0000FF'>Z</font></b> = "+m( this.zeta[2][this.ntotal+1], this.zeta[1][this.ntotal+1]   );
            if (this.tiposolucion==3)
            {
                s = s + "<br>Sin soluciÃ³n!";
            }
            if (this.tiposolucion==4)
            {
                s = s + "<br>Infinitas Soluciones!";
            }

            document.getElementById(div).innerHTML+= s;
       
     } 
     jsimplex.prototype.valorvariable = function(j)
     {
     var i=0;
     var k=0;
    for (k=1; k<=this.norestricciones; k++)
            {
                if (this.base[k]==j)
                {
                    return this.a[k][this.ntotal+1];
                }    
            }
     return 0; //Si pasa por aquÃ­ es que no estÃ¡ en la base..
     }
     function redondear(numero, decimales)
    {
    var flotante = parseFloat(numero);
    var resultado = Math.round(flotante*Math.pow(10,decimales))/Math.pow(10,decimales);
    return resultado;
    }
 }

      function preparar()
      {
          var novariables= document.getElementById("idnovariables").value;
          var norestricciones = document.getElementById("idnorestricciones").value;
          var objetivo;
          var s;
          var i,j,k;
          s="";
          
          if (novariables < 2)
          {
              alert("debe haber como mínimo dos variables");
              document.getElementById("idnovariables").focus();
              return 0;
          }
          
          if (norestricciones < 1)
          {
              alert("debe haber como mínimo una restricción");
              document.getElementById("idnorestricciones").focus();
              return 0;
          }
          
          if (document.getElementById("idoptmaximizar").checked == true)
          {
              objetivo=1;
          }
          else
          {
              objetivo=0;
          }    
           s=s+"Introduzca los coeficientes:<br>";       
          s= s+"<table bordercolor='#FFFFFF'>";
          s= s+"<tr>";
          s= s+"<td></td>";
          for (i=1; i<=novariables; i++)
            {
                s= s+"<td class='jcell'>X<sub>"+i+"</sub></td>";
            }
          s= s+"<td></td>";
          s= s+"<td></td>";
          s= s+"</tr>"; 
          
          s= s+"<tr>"; 
          if (objetivo==1)
          {
              s= s+"<td class='jcell'>Max Z = </td>";
          }else
          {
              s= s+"<td class='jcell'>Min Z = </td>";          
          }
          for(j=1; j<=novariables; j++)
          {
              s= s+ "<td><input type='text name='txtx'" +  j + " size='5' onkeypress='return solonumeros(event)' onblur='jmodelo()' maxlength='6' id='txtx" + j + "'  ></td> ";			
          }  
          s= s+"<td></td>";
          s= s+"<td></td>";        
          s= s+"</tr>"; 
          
          for (i=1; i<=norestricciones; i++)
          {
              s= s+"<tr>";
              s= s+"<td class='jcell'> Restricci&oacute;n "+i+" </td>";
              for (j=1; j<=novariables; j++)
                {
                    s= s+"<td><input type='text name='txtr"+i+"x"+j+"' id='txtr"+i+"x"+j+"'  size='5' onkeypress='return solonumeros(event)' onblur='jmodelo()' maxlength='6'  ></td>";
                }
              s= s + "<td> <select size='1' name='cmbr"+i+"' id='cmbr"+i+"'><option selected value='<=''><=</option><option value='>='> >= </option><option value='='> = </option></select></td>";
              s= s + "<td> <input type='text name='txtrhs"+i+"' size='5' onkeypress='return solonumeros(event)' onblur='jmodelo()' maxlength='6' id='txtrhs"+i+"'  ></td>";          
              s= s+"</tr>";
          }       

          
          s= s+"</table>";
          document.getElementById("idgridproblema").innerHTML= s;          
      }
      
function jmodelo()
{
var novariables;
var norestricciones;
var objetivo;
var i; var j;
var aux;
var s;




novariables = document.getElementById("idnovariables").value;
norestricciones = document.getElementById("idnorestricciones").value;	
if (document.getElementById("idoptmaximizar").checked==true)
{
    objetivo = "Max ";
}else
{
    objetivo = "Min ";
}    

s="<br><font face='Verdana' size='2' color='#000000'>";
s= s + "<table>";
s= s + "<tr>";
s= s + "<td><B>"+objetivo+" Z = </B></td>";

for (i=1; i<= novariables; i++)
	{
	aux = document.getElementById("txtx"+i).value;	
	if (aux!=0)
		{
		if (aux>0)
			{
			if (i==1)
				{
				s= s + "<td>"+(aux==1?"":aux)+"<font color='#0000FF'>X</font><sub>"+i+"</sub></td>";
				}
				else
				{
				s= s + "<td>+" +( aux==1?"":aux) +"<font color='#0000FF'>X</font><sub>"+i+"</sub></td>";
				}			
			}
		else
			{
			s= s + "<td>"+ aux +"<font color='#0000FF'>X</font><sub>"+i+"</sub></td>";
			}
		}
	}
	s= s +"</tr>";
        s= s +"<tr>";
        s= s +"<td>Sujeto a:</td>";
	s= s+"<td></td>";
        for (j=1; j<=novariables+2;j++)
        {
            s= s +"<td></td>";
        }        
        s= s +"</tr>";
	for (j=1; j<=norestricciones; j++)
		{
                s= s +"<tr>";
                s= s +"<td></td>";
		for (i=1; i<=novariables; i++)
			{
			aux = document.getElementById("txtr"+j+"x"+i).value;	
			if (aux!=0)
				{
				if (aux>0)
					{
						if (i==1 )
							{
                                                        if (aux !=1)
                                                            { 
                                                            s= s + "<td>"+aux + "<font color='#0000FF'>X</font><sub>"+i+"</sub></td>";
                                                            }else
                                                            {
                                                            s= s + "<td><font color='#0000FF'>X</font><sub>"+i+"</sub></td>";
                                                            }    
							}
							else
							{
                                                        if (aux!= 1)
                                                            {
                                                            s= s + "<td>+" + aux +"<font color='#0000FF'>X</font><sub>"+i+"</sub></td>";
                                                            }else
                                                            {
                                                            s= s + "<td>+" + "<font color='#0000FF'>X</font><sub>"+i+"</sub></td>";    
                                                            }   
							
							}						
					}
				else
					{
						s= s + "<td>"+ aux +"<font color='#0000FF'>X</font><sub>"+i+"</sub></td>";
					}			
				}else
                                {
                                    s= s + "<td></td>";
                                }
			}
		aux = document.getElementById("cmbr"+j).value;		
		s= s + "<td>" + aux +"</td>" ;
		aux = document.getElementById("txtrhs"+j).value;		
		s= s + "<td>"+aux +"</td>";	
		s= s +"</tr>";
                }	
s= s + "</table>Xi>=0<br><br>Mostrar Iteraciones<input type='checkbox' name='chkiteraciones' checked  value='ON' id='chkiteraciones'><br>";
s= s + "<br>";
s= s+"<div><button  class='pure-button pure-button-primary' onclick='resolver()'><i class='fa fa-th'> </i> Resolver </button></div>";		
document.getElementById('jmodelo').innerHTML=s;
}
function resolver()
{
    var s;
    var n,m;
    var i,j,k;
    var objetivo;
    var generarreporte;
      
    //inicializar ls variables...
    n=0;
    m=0;
    i=0;
    j=0;
    k=0;    
    s="";
    objetivo=0;
    generarreporte=false;
           
    n= parseInt(document.getElementById("idnovariables").value);
    m= parseInt(document.getElementById("idnorestricciones").value);
    
    var a_problema = new Array(m+1);
    for (i=0; i<=m+1; i++)
    {
    a_problema[i] = new Array(n+2);
    }
    
    
    for (i=0; i<=m+1; i++)
        {
        for (j=0; j<=n+2; j++)
            {
            a_problema[i][j]= 0;
             }
        }
   
    //vamos a llenar el arreglo, con los valores digitadores por la persona en la matriz...
    //primero , los coeficientes en la funcion objetivo...
    
    for (i=1; i<=n; i++)
        {
            if (document.getElementById("txtx"+i).value=="")
            {
                a_problema[0][i]= 0;
            }else
            {
                a_problema[0][i]= parseFloat(document.getElementById("txtx"+i).value);
            }        
        }
        
        for (i=1; i<=m; i++)
        {
            for (j=1; j<=n; j++)
                    {
                        if (document.getElementById("txtr"+i+"x"+j).value=="")
                        {
                            a_problema[i][j]= 0;
                        }else
                        {
                            a_problema[i][j]= parseFloat(document.getElementById("txtr"+i+"x"+j).value);
                        }
                        
                    }
            a_problema[i][n+1]= document.getElementById("cmbr"+i).value;
            if (document.getElementById("txtrhs"+i).value=="")
            {
                a_problema[i][n+2]= 0;
            }else
            {
                a_problema[i][n+2]= parseFloat(document.getElementById("txtrhs"+i).value);    
            }   
            
         }
    
    var p= new jsimplex("jsolucion");
    
    document.getElementById("jsolucion").innerHTML="";    
    if (document.getElementById("idoptmaximizar").checked==true)
    {
        p.maximizar=true;
    }else
    {
        p.maximizar=false;
    } 
    
    p.documentar = document.getElementById("chkiteraciones").checked;   
    
    p.novariables= n;
    p.norestricciones = m;
    p.problema = a_problema;
    //p.normalizar();    
    //p.calcularzeta();
    //i=p.quienentra();
    //j=p.quiensale(i);
    //p.documentarmatrix();
    //p.gauss(j,i);
    //p.calcularzeta();
    //i=p.quienentra();
    //j=p.quiensale(i);
    //p.documentarmatrix();
    //p.gauss(j,i); 
    //p.calcularzeta();
    // p.documentarmatrix();
    p.solucionar();
     
}      
</script>
  




	</div>
</div>              
                                   
                        </div>
                        <div class="row">
                        
                        </div>                      
                  </div>
                </div> 
                
            </div>
        </div>
    </div>

</div>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
</body>
</html>
